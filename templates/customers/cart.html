{% extends "base.html" %}

{% block content %}
<h1 class="text-2xl font-bold mb-4">Your Cart</h1>

{% if cart.items.all %}
<table class="w-full border">
  <tr class="bg-gray-100">
    <th class="p-2">Medicine</th>
    <th class="p-2">Qty</th>
    <th class="p-2">Price</th>
    <th class="p-2">Total</th>
    <th class="p-2">Action</th>
  </tr>

  {% for item in cart.items.all %}
  <tr>
    <td class="p-2">{{ item.medicine.name }}</td>

    <td class="p-2">
      <form method="post" action="{% url 'customers:update-cart' item.id %}">
        {% csrf_token %}
        <input type="number" name="quantity" value="{{ item.quantity }}" min="1" class="w-16 border">
        <button class="text-blue-600 underline">Update</button>
      </form>
    </td>

    <td class="p-2">₹{{ item.medicine.price }}</td>
    <td class="p-2">₹{{ item.line_total }}</td>

    <td class="p-2">
      <a href="{% url 'customers:remove-from-cart' item.id %}" class="text-red-600 underline">
        Remove
      </a>
    </td>
  </tr>
  {% endfor %}
</table>

<p class="mt-4 font-semibold text-lg">
  Total: ₹{{ cart.total }}
</p>

<a href="{% url 'customers:checkout' %}"
   class="inline-block mt-4 bg-green-600 text-white px-6 py-2 rounded">
   Proceed to Checkout
</a>

{% else %}
<p>Your cart is empty.</p>
{% endif %}
{% endblock %}
